{% extends "base.html" %}

{% block title %}
    Experiments
{% endblock title %}

{% block stylesheets %}
    {{ super() }}
{% endblock stylesheets %}


{% block content %}

<div class="right_col" role="main">
    <div class="">
        <!-- title of web page -->
        <div class="page-title">
            <div class="title_left">
                <h2>AI-Medical System</h2> <hr>
            </div>
            <div class="title_right">
                <div class="col-md-5 col-sm-5 col-xs-12 form-group pull-right top_search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search for...">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button">Go!</button>
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="clearfix"></div>

        <!-- system subtitle -->
        <div class="">
            <div class="bs-example">
                <div class="jumbotron">
                    <h3 style="text-align: center;">AI-Experiments</h3>
                </div>
            </div>
        </div>
        
        <div class="row">
            <!-- panel for models -->
            <div class="col-md-6">
                <div class="x_panel">
                    <!-- subtitle -->
                    <div class="x_title">
                        <h2>Register of Models</h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li>
                                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                            <li class="dropdown">
                              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                              <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a href="#">Settings 1</a>
                                </li>
                                <li>
                                    <a href="#">Settings 2</a>
                                </li>
                              </ul>
                            </li>
                            <li>
                                <a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                          </ul>
                          <div class="clearfix"></div>
                    </div>

                    <!-- subcontent -->
                    <div class="x_content">
                        <br />

                        <form id="frmModel" class="form-horizontal form-label-left input_mask">
                            <!-- new model -->
                            <input type="hidden" id="form_type" name="form_type" value="model">
                            <div class="form-group">
                                <div class="col-md-9 col-sm-6 col-xs-12 form-group has-feedback">                                    
                                    <input type="text" class="form-control has-feedback-left" id="txtModelName" name="txtModelName" placeholder="Name of model">
                                    <span class="fa fa-file-code-o form-control-feedback left" aria-hidden="true"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-9 col-sm-6 col-xs-12 form-group has-feedback">
                                    <input type="text" class="form-control has-feedback-left" id="txtModelType" name="txtModelType" placeholder="Type of model">
                                    <span class="fa fa-clipboard form-control-feedback left" aria-hidden="true"></span>
                                </div>
                            </div>
                            <div class="clearfix"></div>

                            <div class="form-group">
                                <div class="col-md-9">
                                    <button id="btnSaveModel" type="submit" class="btn btn-primary">
                                        <span class="fa fa-check-square"> Save</span>
                                    </button>
                                    &nbsp;
                                    <button id="btnClearModel" class="btn btn-danger">
                                        <span class="fa fa-eraser"> Clear</span>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- panel for experiments -->
            <div class="col-md-6">
                <div class="x_panel">
                    <!-- subtitle -->
                    <div class="x_title">
                        <h2>Register of Experiments</h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li>
                                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                            <li class="dropdown">
                              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                              <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a href="#">Settings 1</a>
                                </li>
                                <li>
                                    <a href="#">Settings 2</a>
                                </li>
                              </ul>
                            </li>
                            <li>
                                <a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                          </ul>
                          <div class="clearfix"></div>
                    </div>

                    <div class="x_content">
                        <br />

                        <form id="frmExperiment" class="form-horizontal form-label-left input_mask" enctype="multipart/form-data">
                            <!-- new experiment -->
                            <input type="hidden" id="form_type" name="form_type" value="experiment">
                            <div class="form-group">
                                <div class="col-md-9 col-sm-6 col-xs-12 form-group has-feedback">
                                    <input type="text" class="form-control has-feedback-left" id="txtExpDescription" name="txtExpDescription" placeholder="Description">
                                    <span class="fa fa-file-text-o form-control-feedback left" aria-hidden="true"></span>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-md-9 col-sm-6 col-xs-12 form-group has-feedback">
                                    <label class="control-label">Upload experiment</label><br><br>
                                    <input type="file" id="file" name="file">
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-md-9 col-sm-6 col-xs-12 form-group has-feedback">
                                    <label class="control-label">Model</label><br><br>
                                    <select class="form-control" id="cboModel" name="cboModel">
                                        <option> --- Choose option ---</option>
                                        {% for model in lst_models %}
                                            <option value="{{ model.id }}">{{ model.name }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>

                            <div class="clearfix"><br></div>

                            <div class="form-group">
                                <div class="col-md-9">
                                    <button id="btnSaveExp" type="submit" class="btn btn-primary">
                                        <span class="fa fa-check-square"> Save</span>
                                    </button>
                                    &nbsp;
                                    <button id="btnClearExp" class="btn btn-danger">
                                        <span class="fa fa-eraser"> Clear</span>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="clearfix"><br><br></div>
        
        <div class="row">
            <div class="col-md-12">
                <div class="x_panel">
                    <!-- subtitle -->
                    <div class="x_title">
                        <h2>List of Experiments</h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li>
                                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                            <li class="dropdown">
                              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                              <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a href="#">Settings 1</a>
                                </li>
                                <li>
                                    <a href="#">Settings 2</a>
                                </li>
                              </ul>
                            </li>
                            <li>
                                <a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                          </ul>
                          <div class="clearfix"></div>
                    </div>

                    <!-- subcontent -->
                    <div class="x_content">
                        <br />
                        
                        {% for model in lst_models %}
                            <div class="panel">
                                <a class="panel-heading collapsed" role="tab" id="heading{{ model.id }}" data-toggle="collapse" data-parent="#accordion1" href="#collapse{{ model.id }}" aria-expanded="false" aria-controls="collapse{{ model.id }}">
                                    <h4 class="panel-title">Model {{ model.name }}: {{ model.type }}</h4>
                                </a>
                                <div id="collapse{{ model.id }}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                                    <div class="panel-body">
                                        <h5><b>Experiments</b></h5><br>

                                        <div class="row">
                                            {% for experiment in model.experiments %}
                                                <div class="col-md-6">
                                                    <div class="experiment-entry">
                                                        <p>
                                                            <strong>{{ experiment.id }}. </strong> {{ experiment.description }}
                                                        </p>
                                                        
                                                        {% if experiment.path %}
                                                            <img src="/{{ experiment.path }}" width="480px" height="380px">
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                {% if loop.index is divisibleby 2 %}
                                                    </div><br><div class="row">
                                                {% endif %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                        
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

{% endblock content %}

{% block javascripts %}
    {{ super() }}
    <!-- own scripts -->
    <script src="{{ url_for('static', filename='js/experiments.js') }}"></script>
{% endblock javascripts %}
